dist: bionic

language: ruby
cache:
  - bundler

rvm:
  - 2.6.3

services:
  - postgresql

env:
  global:
    - MOZ_HEADLESS=1
    - CC_TEST_REPORTER_ID=59c9ecfc93beafa930ea8169ace46ecb771db3d298e08602179b62c0fdb4f177

addons:
  firefox: latest

before_script:
  - wget https://github.com/mozilla/geckodriver/releases/download/v0.26.0/geckodriver-v0.26.0-linux64.tar.gz
  - tar -xzf geckodriver-v0.26.0-linux64.tar.gz
  - bundle exec rake db:create
  - bundle exec rake db:migrate
  - bundle exec rake assets:precompile
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - chmod +x ./cc-test-reporter
  - ./cc-test-reporter before-build

deploy:
  provider: heroku
  api_key:
    secure: YTri23o86U0etOoh9DocfAJp6qByMqOwJKJcRBfHTvh9J495AU3TZOreX1yOL8mbOzh1XQ0KpNA7avyecgFyfISBpMTa5g
/tY3hZDzIUZs91Fc3ZNArfqPXSoxys0vSdIvM/MTvYWMqz0BtlHZAYErEl2rQ0x9C9wjTkOeYIpbtOgJtWDi1q32ToTF4N6FWAuNCvC9u
fuOPJXElc9T7XS+2mi5oQ7RMD+QNqJvqoe7ds/Jo5L4+Ipu/qGJVTMbkly0zofHwESOLaSI0qQiXM71p6rWlPTequLIwW3QxwMGY50tyd
0rnj6DNMkcVLjVOzEoSv/6kr+BFRoV3Gdkogp5IvhOKQNpuTdrhc03zkjIjBReJwfe6HJ45mpBRtbM+feIJfh+nMhMUnOvN47mEqtR3ww
msMJSSjYnQERPX4D5vxwqUnO1B/HvFFurYVt6tZeB5RNlQPW+z0xG1EQF9jOUTtRn1frnfvXCD2t1oVzP4EdAFJjzaC7v34DPHywFPZft
GRCO3qyhg+Ilgen/DWomkDcPZxp3qDhb8EF6CTnIbzpfMbT1MCVb0cFTgeOie/iY+TvZqRDXGbJKHS9pl3yt9JL28LdklDEzGLTqak4b7
GMEeWe1XPv9yNzbbfFS8cFOIjU6RrLimDshAp3RKYV4v+J2/Ehb6qnQpfutrrWIs=
    app: warm-everglades-53164
    on:
      repo: denriquem/acebook--TeamFavouriteFreindLove-

script:
  - bundle exec rspec
  # - bundle exec rubocop -c .rubocop.yml .

after_script:
- ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT
